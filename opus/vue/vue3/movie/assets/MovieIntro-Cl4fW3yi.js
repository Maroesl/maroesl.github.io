import{d as ne,w as oe,x as ue,r as i,Z as ie,$ as de,a0 as ve,a1 as U,N as ce,a as n,b as o,n as K,e as t,f as v,t as u,g as w,h as S,z as c,F as r,i as m,j as z,k as V,u as re,l as me,m as p,_ as _e}from"./index-CUj4cCHW.js";const pe={key:0},be={class:"back"},ye={class:"info"},he=["src"],Ie={class:"content"},ke={class:"nm text-ellipsis"},xe={class:"enm text-ellipsis"},fe={class:"score"},ge={class:"text"},Ce={class:"text"},we={class:"text"},Se={key:0,style:{display:"flex",height:"380rem",overflow:"scroll"}},Ve=["onClick"],$e={key:1,style:{display:"flex",height:"380rem",overflow:"scroll"}},De=["onClick"],qe={class:"box",style:{height:"auto"}},Te=["onClick"],Re={class:"box"},Be=["onClick"],Ne={style:{padding:"16rem",display:"flex","justify-content":"space-between"}},Ue=["onClick"],ze={class:"title text-ellipsis"},je={class:"text-ellipsis"},Le={class:"text-ellipsis"},Ae={class:"location",style:{display:"flex","justify-content":"space-between"}},Fe={class:"text-ellipsis",style:{width:"90%"}},Me={class:"services"},Ee={class:"showTimes"},Pe=ne({__name:"MovieIntro",setup(Ze){const b=re(),O=oe(),{cityId:x,latitude:$,longitude:D}=ue(O),d=i(null);ie(b.query.movieId).then(l=>{d.value=l.data.data.movie});const q=i(0),h=i(new Date().toLocaleDateString().replace(/\//g,"-")),T=i(null);de(b.query.movieId,x.value).then(l=>{console.log(l.data.data.dates),T.value=l.data.data.dates});const Q=()=>{h.value=T.value[q.value].date},f=i(0),g=i(0),R=i([]),B=i([]),j=i(0),L=i(0),_=i(-1),A=i([]),I=i(-1),k=i(-1),F=i([]),M=i([]),E=i(1e8),W=()=>{k.value=-1},X=()=>{U(h.value,b.query.movieId,x.value,$.value,D.value,_.value,I.value,k.value).then(l=>{var e;console.log((e=l.data.data)==null?void 0:e.cinemas),C.value=l.data.data.cinemas})},Y=i(null);ve(b.query.movieId,x.value,h.value).then(l=>{Y.value=l.data.data,R.value=l.data.data.district.subItems.map(e=>({count:e.count,value:e.id,text:e.name,subItems:e.subItems})),B.value=l.data.data.subway.subItems.map(e=>({count:e.count,value:e.id,text:e.name,subItems:e.subItems})),A.value=l.data.data.brand.subItems.map(e=>({count:e.count,value:e.id,text:e.name,subItems:e.subItems})),F.value=l.data.data.service.subItems.map(e=>({count:e.count,value:e.id,text:e.name,subItems:e.subItems})),M.value=l.data.data.timeRanges.subItems.map(e=>({count:e.count,value:e.id,text:e.name,subItems:e.subItems}))});const C=i(null);U(h.value,b.query.movieId,x.value,$.value,D.value,_.value,I.value,k.value).then(l=>{var e;console.log((e=l.data.data)==null?void 0:e.cinemas),C.value=l.data.data.cinemas}),ce([h,_,I],()=>{U(h.value,b.query.movieId,x.value,$.value,D.value,_.value,I.value,k.value).then(l=>{var e;console.log((e=l.data.data)==null?void 0:e.cinemas),C.value=l.data.data.cinemas})});const ee=me();function te(l){ee.push({path:"/cinemaDetails",query:{id:l,movieId:b.query.movieId}})}return(l,e)=>{const ae=p("van-icon"),P=p("van-tab"),Z=p("van-tabs"),G=p("van-sidebar-item"),H=p("van-sidebar"),N=p("van-dropdown-item"),J=p("van-button"),le=p("van-dropdown-menu");return d.value?(n(),o("div",pe,[d.value?(n(),o("header",{key:0,style:K({background:`url(${d.value.img})`})},[t("div",be,[v(ae,{name:"arrow",onClick:e[0]||(e[0]=a=>l.$router.back()),size:"20rem"})]),t("div",ye,[t("img",{src:d.value.img,alt:""},null,8,he),t("div",Ie,[t("div",ke,u(d.value.nm),1),t("div",xe,u(d.value.enm),1),t("div",fe,[w(u(d.value.sc),1),t("span",null,"("+u(d.value.snum)+"人评)",1)]),t("div",ge,u(d.value.cat),1),t("div",Ce,u(d.value.src)+" / "+u(d.value.dur),1),t("div",we,u(d.value.pubDesc),1)])])],4)):S("",!0),v(Z,{active:q.value,"onUpdate:active":e[1]||(e[1]=a=>q.value=a),onClickTab:e[2]||(e[2]=a=>Q())},{default:c(()=>[(n(!0),o(r,null,m(T.value,a=>(n(),z(P,{title:a.date},null,8,["title"]))),256))]),_:1},8,["active"]),v(le,{"active-color":"#ee0a24"},{default:c(()=>[v(N,{title:"全城",class:"cinemaService"},{default:c(()=>[v(Z,{active:f.value,"onUpdate:active":e[5]||(e[5]=a=>f.value=a),animated:""},{default:c(()=>[(n(),o(r,null,m(["商圈","地铁站"],a=>v(P,{title:a},{default:c(()=>[f.value===0?(n(),o("div",Se,[v(H,{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=s=>g.value=s)},{default:c(()=>[(n(!0),o(r,null,m(R.value,(s,y)=>(n(),z(G,{title:s.text,onClick:se=>j.value=y},null,8,["title","onClick"]))),256))]),_:1},8,["modelValue"]),t("ul",null,[(n(!0),o(r,null,m(R.value[j.value].subItems,s=>(n(),o("li",{onClick:y=>_.value=s.id,class:V(s.id===_.value?"active":"")},[t("p",null,u(s.name),1),t("p",null,u(s.count),1)],10,Ve))),256))])])):S("",!0),f.value===1?(n(),o("div",$e,[v(H,{modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=s=>g.value=s)},{default:c(()=>[(n(!0),o(r,null,m(B.value,(s,y)=>(n(),z(G,{title:s.text,onClick:se=>L.value=y},null,8,["title","onClick"]))),256))]),_:1},8,["modelValue"]),t("ul",null,[(n(!0),o(r,null,m(B.value[L.value].subItems,s=>(n(),o("li",{onClick:y=>_.value=s.id,class:V(s.id===_.value?"active":"")},[t("p",null,u(s.name),1),t("p",null,u(s.count),1)],10,De))),256))])])):S("",!0)]),_:2},1032,["title"])),64))]),_:1},8,["active"])]),_:1}),v(N,{modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=a=>I.value=a),options:A.value},null,8,["modelValue","options"]),v(N,{title:"筛选",class:"cinemaService"},{default:c(()=>[e[9]||(e[9]=t("div",{class:"title"},"影院服务",-1)),t("div",qe,[(n(!0),o(r,null,m(F.value,a=>(n(),o("div",{key:a.value,class:V(["item text-ellipsis",k.value===a.value?"active":""]),onClick:s=>k.value=a.value},u(a.text),11,Te))),128))]),e[10]||(e[10]=t("div",{class:"title"},"时段",-1)),t("div",Re,[(n(!0),o(r,null,m(M.value,a=>(n(),o("div",{key:a.value,class:V(["item text-ellipsis",E.value===a.value?"active":""]),onClick:s=>E.value=a.value},u(a.text),11,Be))),128))]),t("div",Ne,[v(J,{color:"#ccc",plain:"",style:{width:"88rem",height:"36rem"},onClick:W},{default:c(()=>e[7]||(e[7]=[w("重置")])),_:1}),v(J,{color:"#e54847",style:{width:"88rem",height:"36rem"},onClick:X},{default:c(()=>e[8]||(e[8]=[w("确认")])),_:1})])]),_:1})]),_:1}),(n(!0),o(r,null,m(C.value,a=>(n(),o("div",{class:"cinema",key:a.id,onClick:s=>te(a.id)},[t("div",ze,[t("h4",je,u(a.name),1),t("p",Le,[w(u(a.sellPrice)+" ",1),e[11]||(e[11]=t("span",null,"元起",-1))])]),t("div",Ae,[t("p",Fe,u(a.addr),1),t("p",null,u(a.distance),1)]),t("div",Me,[(n(!0),o(r,null,m(a.labels,(s,y)=>(n(),o("div",{class:"item",style:K({color:s.color,borderColor:s.color}),key:y},u(s.name),5))),128))]),t("p",Ee,u(a.showTimes),1)],8,Ue))),128))])):S("",!0)}}}),He=_e(Pe,[["__scopeId","data-v-63728646"]]);export{He as default};
