import{d as z,r as C,o as x,a as u,b as m,e as s,f as a,p as n,t as l,g as f,v as O,u as V,l as _,m as w,_ as j}from"./index-CH_Ckgnz.js";const A={class:"mine"},J={class:"user-info"},b={key:0},q={key:1},B={class:"myself"},M={class:"tab"},P={class:"want"},$={class:"dingdan"},L={style:{width:"100%",display:"flex","justify-content":"space-around"}},R={class:"icon"},T={class:"icon"},W={class:"icon"},D=z({__name:"MineView",setup(E){const r=V(),d=_(),g=_(),h=localStorage.getItem("token"),y=JSON.parse(localStorage.getItem("OrdersArray")),o=h?JSON.parse(h):"",k=()=>{o?(localStorage.removeItem("token"),localStorage.removeItem("token2"),localStorage.removeItem("OrdersArray"),window.location.reload()):d.push({path:"/login",query:{target:r.fullPath}})},S=()=>{o||d.push({path:"/login",query:{target:r.fullPath}})},I=()=>{if(o){d.push("/wantwatch");return}else d.push({path:"/login",query:{target:r.fullPath}})},p=C(0);return x(()=>{const v=JSON.parse(localStorage.getItem("token")),t=JSON.parse(localStorage.getItem("users"))||[];if(v){const c=v,e=t.find(i=>i.username===c);e&&Array.isArray(e.wantwatch)?p.value=e.wantwatch.length:p.value=0}}),(v,t)=>{var i;const c=w("van-image"),e=w("van-icon");return u(),m("div",A,[s("header",{onClick:S},[s("div",J,[a(c,{round:"",width:"60rem",height:"60rem",fit:"cover",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"}),n(o)===""?(u(),m("h4",b,"登录/注册")):(u(),m("h4",q,l(n(o)),1))]),s("div",B,[t[2]||(t[2]=f("个人主页 ")),a(e,{name:"arrow",size:"12rem"})])]),s("div",M,[s("div",P,[s("div",{onClick:I},[s("span",null,l(p.value),1),t[3]||(t[3]=f("想看 "))]),a(e,{name:"arrow",size:"12rem"})]),s("div",{class:"want",onClick:t[0]||(t[0]=N=>n(g).push("/successorder"))},[s("div",null,[s("span",null,l(((i=n(y))==null?void 0:i.length)||0),1),t[4]||(t[4]=f(" 看过"))]),a(e,{name:"arrow",size:"12rem"})])]),s("div",$,[t[9]||(t[9]=s("p",{class:"title"},"我的订单",-1)),s("div",L,[s("div",{class:"icon",onClick:t[1]||(t[1]=N=>n(g).push("/orderpage"))},[a(e,{name:"coupon-o",size:"34rem"}),t[5]||(t[5]=s("p",null,"电影票",-1))]),s("div",R,[a(e,{name:"bag-o",size:"34rem"}),t[6]||(t[6]=s("p",null,"演出/玩乐",-1))]),s("div",T,[a(e,{name:"video-o",size:"34rem"}),t[7]||(t[7]=s("p",null,"在线观影",-1))]),s("div",W,[a(e,{name:"hot-o",size:"34rem"}),t[8]||(t[8]=s("p",null,"周边",-1))])])]),t[10]||(t[10]=O('<div class="dingdan" data-v-40543f4d><div style="width:100%;display:flex;justify-content:space-around;" data-v-40543f4d><div class="icon" data-v-40543f4d><p class="title" data-v-40543f4d>优惠券</p><p data-v-40543f4d><span data-v-40543f4d>1</span>张可用</p></div><div class="icon" data-v-40543f4d><p class="title" data-v-40543f4d>影城卡</p><p data-v-40543f4d><span data-v-40543f4d>0</span>张可用</p></div><div class="icon" data-v-40543f4d><p class="title" data-v-40543f4d>猫享卡</p><p data-v-40543f4d>去绑卡</p></div><div class="icon" data-v-40543f4d><p class="title" data-v-40543f4d>喵币</p><p data-v-40543f4d><span data-v-40543f4d>527</span></p></div></div></div>',1)),s("div",{class:"dingdan out",onClick:k},l(n(o)?"退出登录":"去登录"),1)])}}}),G=j(D,[["__scopeId","data-v-40543f4d"]]);export{G as default};
