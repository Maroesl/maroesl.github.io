import{_ as ue,M as he,r as k,T as oe,S as ge,p as e,b as r,f as _,z as S,e as s,t as n,n as pe,F as C,i as P,h as d,g as x,Y as ie,u as fe,m as y,a,k as ye,j as u,l as ke}from"./index-CUj4cCHW.js";import{g as be,a as we,b as Se}from"./LXZindex-BrYxm-2E.js";const xe={key:0,class:"Cinema-body"},Fe={class:"map"},Te={class:"map-left"},Le={class:"map-name"},Ce={class:"map-loch"},Pe={class:"icon"},ze=["onClick"],De={key:1,class:"Film-info"},Be={class:"title"},Ne={key:0,style:{color:"#ffb80d","margin-left":"5rem"}},qe={key:1,style:{color:"#ffb80d","margin-left":"5rem"}},Me={class:"desc"},Ae={class:"show-time"},Ve={class:"show-Ad"},Re={class:"Ad-btn"},$e={key:0},Ee={class:"Card"},Ue={class:"Card-left"},Ye={class:"play-time"},He={class:"start-Time"},Je={class:"end-Time"},Qe={key:0,class:"tag"},Ge={class:"Language"},Ke={class:"lang"},We={class:"Quality"},Xe={class:"Card-right"},Ze={class:"Price-box"},je={class:"Price"},Oe={key:0,class:"VipPrice"},Ie={class:"vip"},es={class:"pricetext"},ss=["onClick"],ts={class:"FoodPackages-box"},os={class:"FoodPack-Card"},is={class:"Food-info-box"},as={class:"Foot-title"},ns={class:"Food-Tag"},ls={class:"Food-name"},ds={class:"Foot-curnum"},cs={class:"Foot-pay-box"},rs={class:"Food-price"},vs={__name:"CinemaDetails",setup(ms){const F=ke(),h=fe(),ae=he(),{ChooseYourSeat:ne}=ae;let g=k(null);be(h.query.id).then(l=>{g.value=l.data.data});let o=k(0),t=k(null);we(h.query.id).then(l=>{t.value=l.data.data,h.query.movieId&&(o.value=l.data.data.movies.findIndex(i=>i.id==h.query.movieId)),oe(()=>{D()})});let b=k(0),p=k(null);Se().then(l=>{p.value=l.data.data.dealList[0]});let z=ge("scrollbox");function le(){oe(()=>{o.value=Math.round(z.value.scrollLeft/85)})}function D(l){z.value.scrollLeft=o.value*85}const B=localStorage.getItem("token"),de=B?JSON.parse(B):"";function ce(l){de?(F.push({path:"/buyTicket"}),ne(t==null?void 0:t.value.movies[o.value].img,{movid:h.query.id,CMname:l.CMname,name:l.name,lobbySeats:l.lobbySeats,Language:l.Language,ScreenLevel:l.ScreenLevel,date:l.date,id:t==null?void 0:t.value.movies[o.value].id})):F.push({path:"/login",query:{target:h.fullPath}})}return(l,i)=>{var q,M,A,V,R,$,E,U,Y,H,J,Q,G;const w=y("van-icon"),re=y("van-nav-bar"),N=y("van-image"),ve=y("van-empty"),v=y("van-tab"),me=y("van-tabs");return e(g)?(a(),r("div",xe,[_(re,{title:e(g).nm,onClickLeft:i[0]||(i[0]=m=>e(F).back())},{right:S(()=>[_(w,{name:"wap-nav",size:"28rem",color:"#fff"})]),left:S(()=>[_(w,{name:"arrow-left",size:"28rem",color:"#fff"})]),_:1},8,["title"]),s("div",Fe,[s("div",Te,[s("div",Le,n(e(g).nm),1),s("div",Ce,n(e(g).addr),1)]),s("div",Pe,[_(w,{name:"location-o",color:"#a6d1ff",size:"28rem"})])]),(q=e(t))!=null&&q.movies?(a(),r("div",{key:0,class:"FilmImgBox",style:pe({background:`url(${(M=e(t))==null?void 0:M.movies[e(o)].img})`})},[s("div",{class:"imgbox",ref:"scrollbox",onScroll:le,onTouchend:D},[(a(!0),r(C,null,P((A=e(t))==null?void 0:A.movies,(m,f)=>(a(),r("div",{class:ye(["img",f===e(o)?"active":""]),key:m.id,onClick:T=>ie(o)?o.value=f:o=f},[_(N,{width:"75rem",height:"110rem",fit:"cover",src:m.img},null,8,["src"])],10,ze))),128))],544)],4)):d("",!0),(V=e(t))!=null&&V.movies?(a(),r("div",De,[s("div",Be,[x(n((R=e(t))==null?void 0:R.movies[e(o)].nm)+" ",1),(($=e(t))==null?void 0:$.movies[e(o)].sc)=="0.0"?(a(),r("span",Ne," 暂无评分 ")):(a(),r("span",qe,n((E=e(t))==null?void 0:E.movies[e(o)].sc)+"分 ",1))]),s("div",Me,n((U=e(t))==null?void 0:U.movies[e(o)].desc),1)])):d("",!0),s("div",Ae,[_(me,{active:e(b),"onUpdate:active":i[1]||(i[1]=m=>ie(b)?b.value=m:b=m)},{default:S(()=>{var m,f,T,K,W,X,Z,j,O;return[s("div",Ve,[i[3]||(i[3]=s("div",{class:"Ad-icon"},"折扣",-1)),i[4]||(i[4]=s("div",{class:"Ad-text"},"现在开卡，首单2张票最高立减6元",-1)),s("div",Re,[i[2]||(i[2]=x("9.9元起开卡")),_(w,{name:"arrow",color:"#afafaf"})])]),(a(!0),r(C,null,P((m=e(t))==null?void 0:m.movies[e(o)].shows,(I,L)=>(a(),u(v,{key:L,title:I.showDate},{default:S(()=>{var ee,se;return[(ee=e(t))!=null&&ee.movies[e(o)].shows[L].plist.length?d("",!0):(a(),r("div",$e,[_(ve,{image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"本日暂无电影票出售！"})])),(a(!0),r(C,null,P((se=e(t))==null?void 0:se.movies[e(o)].shows[L].plist,(c,_e)=>(a(),r("div",{class:"BuyTickets-Card",key:_e},[s("div",Ee,[s("div",Ue,[s("div",Ye,[s("div",He,n(c.tm),1),s("div",Je,n(c.tm)+"散场",1),c.preShowTag?(a(),r("div",Qe,"点映")):d("",!0)]),s("div",Ge,[s("div",Ke,n(c.lang)+" "+n(c.tp),1),s("div",We,n(c.th),1)])]),s("div",Xe,[s("div",Ze,[s("div",je,[i[5]||(i[5]=s("span",{style:{"font-size":"10rem",height:"16rem"}},"￥",-1)),x(" "+n(c.discountSellPrice)+" ",1),c.vipPrice?(a(),r("div",Oe,[s("div",Ie,n(c.vipPriceName),1),s("div",es,"￥"+n(c.vipPrice),1)])):d("",!0)]),i[6]||(i[6]=s("div",{class:"Discount-text"},"折扣卡首单优惠",-1))]),s("div",{class:"Language",onClick:_s=>{var te;return ce({CMname:e(g).nm,name:(te=e(t))==null?void 0:te.movies[e(o)].nm,lobbySeats:c.th,Language:c.lang,ScreenLevel:c.tp,date:I.showDate})}}," 购票 ",8,ss)])])]))),128))]}),_:2},1032,["title"]))),128)),((f=e(t))==null?void 0:f.movies[e(o)].shows.length)>2?(a(),u(v,{key:0,disabled:""})):d("",!0),((T=e(t))==null?void 0:T.movies[e(o)].shows.length)>2?(a(),u(v,{key:1,disabled:""})):d("",!0),((K=e(t))==null?void 0:K.movies[e(o)].shows.length)>2?(a(),u(v,{key:2,disabled:""})):d("",!0),((W=e(t))==null?void 0:W.movies[e(o)].shows.length)>2?(a(),u(v,{key:3,disabled:""})):d("",!0),((X=e(t))==null?void 0:X.movies[e(o)].shows.length)>2?(a(),u(v,{key:4,disabled:""})):d("",!0),((Z=e(t))==null?void 0:Z.movies[e(o)].shows.length)>2?(a(),u(v,{key:5,disabled:""})):d("",!0),((j=e(t))==null?void 0:j.movies[e(o)].shows.length)>2?(a(),u(v,{key:6,disabled:""})):d("",!0),((O=e(t))==null?void 0:O.movies[e(o)].shows.length)>2?(a(),u(v,{key:7,disabled:""})):d("",!0)]}),_:1},8,["active"])]),s("div",ts,[i[9]||(i[9]=s("div",{class:"title"},"影院超值套餐",-1)),s("div",os,[_(N,{width:"92rem",height:"92rem",fit:"contain",src:(Y=e(p))==null?void 0:Y.imageUrl},null,8,["src"]),s("div",is,[s("div",as,[s("div",ns,n((H=e(p))==null?void 0:H.titleTag),1),s("div",ls,n((J=e(p))==null?void 0:J.firstTitle),1)]),s("div",ds,n((Q=e(p))==null?void 0:Q.curNumberDesc),1),s("div",cs,[s("div",rs,[i[7]||(i[7]=s("span",{style:{"font-size":"12rem"}},"￥",-1)),x(n((G=e(p))==null?void 0:G.price),1)]),i[8]||(i[8]=s("div",{class:"pay-btn"},"去购买",-1))])])])])])):d("",!0)}}},gs=ue(vs,[["__scopeId","data-v-97e4143c"]]);export{gs as default};
