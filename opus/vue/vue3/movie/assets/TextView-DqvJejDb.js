import{_ as w,r as i,S as b,b as v,e as o,f as n,F as S,i as Y,p as N,m as f,a as p,n as B,z as E,g as F,t as _,k as I,V as $}from"./index-CUj4cCHW.js";const M={class:"back-button"},P=["src","poster"],R={class:"line"},j={style:{"margin-top":"20rem"}},D={class:"icon"},J={class:"info"},L={class:"icon"},O={class:"icon"},U={class:"dsc"},q={class:"name"},A={__name:"TextView",setup(G){const c=i(!1),h=()=>{c.value=!c.value},g=JSON.parse(localStorage.getItem("playlist"))||[],a=i(0),d=i(0),l=i(0),u=b("videos");console.log(u);const m=()=>{console.log("playCurrentVideo",u),u.value.forEach((e,s)=>{s===a.value?e.play():e.pause()})},y=e=>{console.log("toggleVideo",e,e.target,e.target.paused),e.target.paused?(console.log("play"),e.target.play()):(console.log("pause"),e.target.pause())},T=e=>{d.value=e.touches[0].clientY},k=e=>{l.value=e.touches[0].clientY},x=()=>{const e=l.value-d.value;e>50&&l.value!==0&&a.value>0?(a.value--,m()):e<-50&&l.value!==0&&a.value<g.length-1&&(a.value++,m()),d.value=0,l.value=0};return(e,s)=>{const r=f("van-icon"),V=f("van-image");return p(),v("div",{class:"video-container",onTouchstart:T,onTouchmove:k,onTouchend:x},[o("div",M,[n(r,{name:"arrow-left",onClick:s[0]||(s[0]=t=>e.$router.back()),size:"30rem",color:"#999"})]),(p(!0),v(S,null,Y(N(g),(t,C)=>(p(),v("div",{key:t.id,style:B({transform:`translateY(${(C-a.value)*100}%)`}),class:"video-wrapper"},[o("video",{src:t.video.url,class:"video-player",loop:"",poster:t.video.imgUrl,preload:"none",ref_for:!0,ref:"videos",onClick:s[1]||(s[1]=z=>y(z))},null,8,P),o("div",R,[n(V,{round:"",src:t.user.avatarurl,size:"48rem",fit:"cover"},{error:E(()=>s[2]||(s[2]=[F("加载失败")])),_:2},1032,["src"]),o("div",j,[o("div",D,[n(r,{size:"32rem",name:"good-job-o"})]),o("div",J,_(t.upCount),1)]),o("div",null,[o("div",L,[n(r,{size:"32rem",name:"chat-o"})]),s[3]||(s[3]=o("div",{class:"info"},"评论",-1))]),o("div",null,[o("div",O,[n(r,{size:"32rem",name:"share-o"})]),s[4]||(s[4]=o("div",{class:"info"},"分享",-1))])]),o("div",U,[o("div",q,_(t.user.nickName),1),o("p",{class:I({"text-clamp":!c.value}),onClick:$(h,["stop"])},_(t.title),3)])],4))),128))],32)}}},Q=w(A,[["__scopeId","data-v-78f69e8b"]]);export{Q as default};
