import{G as N,E as tt,I as et,J as st,f as n,K as ot,a5 as nt,_ as at,M as lt,x as it,r as h,c as L,N as dt,b as p,z as y,e as t,p as o,t as a,F as B,i as S,g as l,v as rt,Y as w,O as T,a3 as D,a4 as W,m as c,a as m,j as ut,h as ct,l as mt,u as pt}from"./index-CUj4cCHW.js";let P;const vt={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let ft=N({},vt);function gt(){({instance:P}=et({setup(){const{state:v,toggle:f}=st();return()=>n(nt,ot(v,{"onUpdate:show":f}),null)}}))}function _t(b){return tt?new Promise((v,f)=>{P||gt(),P.open(N({},ft,b,{callback:k=>{(k==="confirm"?v:f)(k)}}))}):Promise.resolve(void 0)}const ht=b=>_t(N({showCancelButton:!0},b)),wt={class:"Orders-box"},bt={class:"times"},yt={class:"content"},kt={class:"info-box"},zt={class:"title"},Ct={class:"ti1"},xt={class:"titprice"},Vt={class:"date"},Ot={class:"lobby"},At={class:"info"},Ft={class:"returnATicket"},Bt={class:"icon"},St={class:"icon"},Tt={class:"detail"},Dt={style:{color:"#afafaf"}},Pt={class:"so-price"},Nt={style:{"font-size":"22rem",color:"#f0526d"}},Ut={class:"YingCheng-Vip"},Yt={class:"Vip"},It={class:"Vip-box"},Rt={class:"Vip-itemL"},Lt={class:"f-s"},Wt={style:{color:"#ff9e05"}},jt={class:"Vip-itemR"},Et={class:"icon"},Gt={class:"Foot-box"},Mt={class:"Card-right"},Jt={class:"title"},qt={class:"price-num"},Ht={style:{color:"red"}},Kt={style:{"font-size":"12rem","text-decoration":"line-through",color:"#afafaf"}},Xt={class:"btn-text"},Qt={class:"Top"},Zt={class:"price-Foot"},$t={style:{color:"#f0526d","font-size":"22rem","margin-left":"20rem"}},te={class:"bottom-bar"},ee={style:{color:"red"}},se={class:"price"},oe={class:"btn-box"},ne={class:"Foot-box"},ae={class:"Card-right"},le={class:"title"},ie={class:"price-num"},de={style:{color:"red"}},re={style:{"font-size":"12rem","text-decoration":"line-through",color:"#afafaf"}},ue={__name:"OrdersDetali",setup(b){const v=mt();pt();const f=lt(),{FilmImg:k,CurrentOrders:i,OrdersArray:U}=it(f);console.log("初始化",i);const{addOrdersArray:Y}=f,j=i.value.PlaceAnOrderTime+9e5-Date.now();let V=h([{id:1,name:"32oz爆米花1桶+16oz可乐1杯(1选1)",price:29,num:0,tag:"双人",img:"https://img.meituan.net/maoyaneticketimage/4258f048a69cad039c637a05d9d426bb186892.png@750w_750h_2e"},{id:2,name:"42oz爆米花1桶+16oz可乐1杯(1选1)",price:39,num:0,tag:"双人",img:"https://img.meituan.net/maoyaneticketimage/4258f048a69cad039c637a05d9d426bb186892.png@750w_750h_2e"},{id:3,name:"52oz爆米花1桶+16oz可乐1杯(1选1)",price:49,num:0,tag:"双人",img:"https://img.meituan.net/maoyaneticketimage/4258f048a69cad039c637a05d9d426bb186892.png@750w_750h_2e"},{id:4,name:"62oz爆米花1桶+16oz可乐1杯(1选1)",price:59,num:0,tag:"双人",img:"https://img.meituan.net/maoyaneticketimage/4258f048a69cad039c637a05d9d426bb186892.png@750w_750h_2e"},{id:5,name:"72oz爆米花1桶+16oz可乐1杯(1选1)",price:69,num:0,tag:"双人",img:"https://img.meituan.net/maoyaneticketimage/4258f048a69cad039c637a05d9d426bb186892.png@750w_750h_2e"},{id:6,name:"82oz爆米花1桶+16oz可乐1杯(1选1)",price:79,num:0,tag:"双人",img:"https://img.meituan.net/maoyaneticketimage/4258f048a69cad039c637a05d9d426bb186892.png@750w_750h_2e"},{id:7,name:"92oz爆米花1桶+16oz可乐1杯(1选1)",price:89,num:0,tag:"双人",img:"https://img.meituan.net/maoyaneticketimage/4258f048a69cad039c637a05d9d426bb186892.png@750w_750h_2e"}]),z=L(()=>V.value.reduce((_,e)=>_+e.price*e.num,0)),C=L(()=>V.value.filter(_=>_.num>=1)),x=h(!1),O=h("查看全部7个套餐");function E(){x.value=!x.value,x.value?O.value="收起":O.value="查看全部7个套餐"}let r=h(!1);function G(){console.log("支付成功"),W("支付成功"),Y({...i.value,FootArr:C.value,isPay:!0,Allprice:z.value+i.value.price}),console.log(U.value),v.replace({name:"completedorder",query:{Tip:"支付成功"}})}function M(){ht({title:"返回",message:"订单尚未支付，稍后可在我的订单中查看"}).then(()=>{W("已经加入待支付订单"),Y({...i.value,FootArr:C.value,isPay:!1,Allprice:z.value+i.value.price}),console.log(U.value),v.back()}).catch(()=>{})}let d=h(!1);const J=()=>{d.value=!d.value};let g=h("");return dt(g,_=>{_.length>=6&&G()}),(_,e)=>{const u=c("van-icon"),q=c("van-count-down"),H=c("van-nav-bar"),A=c("van-image"),I=c("van-stepper"),K=c("van-button"),X=c("van-empty"),R=c("van-popup"),Q=c("van-password-input"),Z=c("van-number-keyboard");return m(),p("div",wt,[n(H,{title:"支付订单",onClickLeft:M},{right:y(()=>[t("div",bt,[n(u,{name:"clock-o",size:"20rem",color:"#fff",style:{"padding-right":"4rem"}}),n(q,{time:j,format:"mm: ss"})])]),left:y(()=>[n(u,{name:"arrow-left",size:"28rem",color:"#fff"})]),_:1}),t("div",yt,[n(A,{src:o(k),style:{width:"70rem",height:"100rem","margin-right":"10rem"}},null,8,["src"]),t("div",kt,[t("div",zt,[t("div",Ct,a(o(i).name),1),t("div",xt,a(o(i).price/38)+"张 原价￥"+a(o(i).price)+".0 ",1)]),t("div",Vt,a(o(i).dateinfo),1),t("div",Ot,a(o(i).CMname),1),t("div",At,[t("span",null,a(o(i).lobbySeats),1),(m(!0),p(B,null,S(o(i).Seat,s=>(m(),p("span",{key:s},a(s)+"  ",1))),128))])])]),t("div",Ft,[t("div",null,[t("span",Bt,[n(u,{name:"success",color:"#fff"})]),e[6]||(e[6]=l(" 支持退票 ")),t("span",St,[n(u,{name:"success",color:"#fff"})]),e[7]||(e[7]=l(" 支持改签 "))]),t("div",null,[e[8]||(e[8]=l("退改签须知")),n(u,{name:"arrow"})])]),t("div",Tt,[t("div",null,[e[10]||(e[10]=t("span",null,"影票活动与优惠券",-1)),t("span",Dt,[e[9]||(e[9]=l("无可用")),n(u,{name:"arrow"})])]),t("div",Pt,[e[11]||(e[11]=l(" 票价小计 ")),e[12]||(e[12]=t("span",{style:{"font-size":"13rem",color:"#f0526d"}},"￥",-1)),t("span",Nt,a(o(i).price)+".0",1)])]),e[30]||(e[30]=t("div",{style:{width:"100vw",height:"10rem","background-color":"#f5f5f9"}},null,-1)),t("div",Ut,[e[18]||(e[18]=t("div",{class:"title"},[t("div",null,"影城卡"),t("div",{class:"desc"},"开卡享优惠，数量有限，先到先得~")],-1)),t("div",Yt,[t("div",It,[e[17]||(e[17]=t("div",{class:"TuiJian"},"推荐",-1)),t("div",Rt,[e[15]||(e[15]=t("div",null,"DY影城会员卡",-1)),t("div",Lt,[e[14]||(e[14]=l(" 开通后")),t("span",Wt,[e[13]||(e[13]=l("本单立减9元")),n(u,{name:"arrow"})])])]),t("div",jt,[e[16]||(e[16]=t("span",null,"￥9.9/季度",-1)),t("span",Et,[n(u,{name:"success",color:"#fff"})])])])])]),e[31]||(e[31]=t("div",{class:"GuanYing-text"},[t("div",{class:"GY-box"},[t("div",{class:"title"},"观影标配"),t("div",{class:"desc"},"客官,爆米花跟电影更配哦~")])],-1)),t("div",Gt,[t("div",null,[(m(!0),p(B,null,S(o(V),(s,F)=>T((m(),p("div",{class:"Foot-Card",key:s.id},[n(A,{src:s.img,width:"95rem",height:"95rem"},null,8,["src"]),t("div",Mt,[t("div",Jt,[e[19]||(e[19]=t("span",null,null,-1)),l(" "+a(s.name),1)]),t("div",qt,[t("div",Ht,[l(" ￥"+a(s.price)+" ",1),t("span",Kt,"￥"+a(s.price+16),1)]),n(I,{modelValue:s.num,"onUpdate:modelValue":$=>s.num=$,min:"0",theme:"round","button-size":"22","disable-input":""},null,8,["modelValue","onUpdate:modelValue"])])])])),[[D,o(x)||F<3]])),128))])]),t("div",Xt,[t("div",{class:"btn-All",onClick:E},a(o(O)),1),t("div",Qt,[e[21]||(e[21]=t("span",null,"抵用卷",-1)),t("span",null,[e[20]||(e[20]=l("无可用")),n(u,{name:"arrow",color:"#afafaf"})])]),t("div",Zt,[e[23]||(e[23]=t("span",null,"小吃小计",-1)),t("span",$t,[e[22]||(e[22]=t("span",{style:{"font-size":"13rem"}},"￥",-1)),l(a(o(z))+".0",1)])])]),e[32]||(e[32]=rt('<div style="width:100vw;height:10rem;background-color:#f5f5f9;" data-v-2761d201></div><div class="user-info" data-v-2761d201><div class="CellPhone" data-v-2761d201><div class="title" data-v-2761d201><span style="margin-right:15rem;" data-v-2761d201>手机号</span><span data-v-2761d201>136****0012</span></div><div class="desc" data-v-2761d201>手机号仅用于生成订单，取票码不再以短信发送</div></div></div><div style="width:100vw;height:75rem;background-color:#f5f5f9;" data-v-2761d201></div>',3)),t("div",te,[t("div",ee,[e[24]||(e[24]=l(" ￥")),t("span",se,a(o(z)+o(i).price)+".0",1)]),t("div",oe,[t("div",{class:"text",onClick:e[0]||(e[0]=s=>w(r)?r.value=!o(r):r=!o(r))},[e[25]||(e[25]=l(" 明细")),T(n(u,{name:"arrow-down"},null,512),[[D,o(r)]]),T(n(u,{name:"arrow-up"},null,512),[[D,!o(r)]])]),n(K,{type:"warning",style:{width:"38vw","background-color":"#ff9e05"},onClick:J},{default:y(()=>e[26]||(e[26]=[l("确认支付")])),_:1})])]),n(R,{show:o(r),"onUpdate:show":e[1]||(e[1]=s=>w(r)?r.value=s:r=s),round:"",position:"bottom",style:{height:"60%"},class:"show-pop"},{default:y(()=>[e[28]||(e[28]=t("div",{class:"title-T"},"小吃小计",-1)),o(C).length?ct("",!0):(m(),ut(X,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"暂时未选购小吃哦,快去选购吧!"})),t("div",ne,[t("div",null,[(m(!0),p(B,null,S(o(C),s=>(m(),p("div",{class:"Foot-Card",key:s.id},[n(A,{src:s.img,width:"95rem",height:"95rem"},null,8,["src"]),t("div",ae,[t("div",le,[e[27]||(e[27]=t("span",null,null,-1)),l(" "+a(s.name),1)]),t("div",ie,[t("div",de,[l(" ￥"+a(s.price)+" ",1),t("span",re,"￥"+a(s.price+16),1)]),n(I,{modelValue:s.num,"onUpdate:modelValue":F=>s.num=F,min:"0",theme:"round","button-size":"22","disable-input":""},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))])])]),_:1},8,["show"]),n(R,{show:o(d),"onUpdate:show":e[5]||(e[5]=s=>w(d)?d.value=s:d=s),round:"",position:"bottom",style:{height:"400rem"},class:"PAWshow"},{default:y(()=>[e[29]||(e[29]=t("div",{class:"title"},"请输入支付密码",-1)),n(Q,{value:o(g),focused:o(d),onFocus:e[2]||(e[2]=s=>w(d)?d.value=!0:d=!0),style:{"padding-top":"40rem"}},null,8,["value","focused"]),n(Z,{modelValue:o(g),"onUpdate:modelValue":e[3]||(e[3]=s=>w(g)?g.value=s:g=s),show:o(d),onBlur:e[4]||(e[4]=s=>w(d)?d.value=!1:d=!1)},null,8,["modelValue","show"])]),_:1},8,["show"])])}}},me=at(ue,[["__scopeId","data-v-2761d201"]]);export{me as default};
